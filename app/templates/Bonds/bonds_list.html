{% extends "layout.html" %} {% block content %}

<head>
  <style>
    body {
      background-color: black;
    }

    .container {
      padding: 15px;
    }

    .card {
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      margin-bottom: 20px;
      transition: all 0.3s ease-in-out;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .card:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    }

    .card-header {
      position: relative;
      padding: 0;
    }

    .card-img-top {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-top-left-radius: 0.5rem;
      border-top-right-radius: 0.5rem;
    }

    .sale-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #ff0000;
      color: white;
      padding: 5px 10px;
      font-size: 0.8rem;
      font-weight: bold;
    }

    .card-body {
      padding: 15px;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    .card-title {
      font-size: 1.1rem;
      margin-bottom: 10px;
      line-height: 1.2;
      max-height: 2.4em;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }

    .card-text {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 10px;
      flex-grow: 1;
    }

    .price {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .btn-view {
      width: 100%;
      background-color: #ec994b;
      border: 1px solid #dee2e6;
      color: black;
      padding: 10px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 1rem;
      font-weight: bold;
      margin-top: auto;
    }

    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 30px;
      margin-bottom: 30px;
    }

    .pagination .page-item {
      margin: 0 2px;
    }

    .pagination .page-link {
      color: #ec994b;
      background-color: white;
      border: 1px solid #dee2e6;
      padding: 8px 12px;
      text-decoration: none;
      border-radius: 4px;
      font-weight: 500;
    }

    .pagination .page-link:hover {
      color: white;
      background-color: #ec994b;
      border-color: #ec994b;
    }

    .pagination .page-item.active .page-link {
      color: white;
      background-color: #ec994b;
      border-color: #ec994b;
    }

    .pagination .page-item.disabled .page-link {
      color: #6c757d;
      background-color: white;
      border-color: #dee2e6;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="d-flex align-items-center min-vh-50">
      <div class="container text-center mb-md-5">
        <div class="lc-block">
          <div class="lc-block mb-3">
            <div editable="rich">
              <h1 class="fw-bold display-3 section-heading">
                Vintage New York City Bonds Now Available for Purchase
              </h1>
            </div>
          </div>
          <div class="lc-block mb-4 col-xxl-6 mx-auto">
            <hr />
          </div>
          <div class="lc-block">
            <div editable="rich">
              <p>
                The NYC Department of Records and Information Services is
                offering an opportunity to own original, redeemed vintage bonds
                from the 1920s to the 1980s. These beautifully illustrated
                documents, signed by notable mayors such as James Walker,
                Fiorello La Guardia, John Lindsay, and Abraham Beame, hold
                historical significance. Originally issued to fund essential
                city projects—including school construction, transit expansion,
                and water supply improvements—these bonds are now available as
                unique artifacts of New York City's rich financial and municipal
                history.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      {% for bond in bonds %}
      <div class="col-md-4 mb-4">
        <div class="card h-100">
          <div class="card-header">
            <img
              src="{{ bond.front_image or url_for('static', filename='images/no_image.jpg') }}"
              class="card-img-top"
              alt="Bond Image"
            />
          </div>
          <div class="card-body">
            <h5 class="card-title">
              Bond Number: {{ bond.bond_id }} - {{ bond.type }}
            </h5>
            <p class="card-text">Purpose of bond: {{ bond.purpose_of_bond }}</p>
            <p class="price">${{ bond.retail_price }}</p>
            <a href="/bond/{{ bond.bond_id }}" class="btn-view">View Details</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Pagination Controls -->
    {% if pagination.pages > 1 %}
    <nav aria-label="Bonds pagination">
      <ul class="pagination">
        <!-- Previous Page -->
        {% if pagination.has_prev %}
          <li class="page-item">
            <a class="page-link" href="{{ url_for('main.get_bonds', page=pagination.prev_num) }}" aria-label="Previous">
              <span aria-hidden="true">&laquo; Previous</span>
            </a>
          </li>
        {% else %}
          <li class="page-item disabled">
            <span class="page-link" aria-label="Previous">
              <span aria-hidden="true">&laquo; Previous</span>
            </span>
          </li>
        {% endif %}

        <!-- Page Numbers -->
        {% for page_num in pagination.iter_pages() %}
          {% if page_num %}
            {% if page_num != pagination.page %}
              <li class="page-item">
                <a class="page-link" href="{{ url_for('main.get_bonds', page=page_num) }}">{{ page_num }}</a>
              </li>
            {% else %}
              <li class="page-item active">
                <span class="page-link">{{ page_num }}</span>
              </li>
            {% endif %}
          {% else %}
            <li class="page-item disabled">
              <span class="page-link">...</span>
            </li>
          {% endif %}
        {% endfor %}

        <!-- Next Page -->
        {% if pagination.has_next %}
          <li class="page-item">
            <a class="page-link" href="{{ url_for('main.get_bonds', page=pagination.next_num) }}" aria-label="Next">
              <span aria-hidden="true">Next &raquo;</span>
            </a>
          </li>
        {% else %}
          <li class="page-item disabled">
            <span class="page-link" aria-label="Next">
              <span aria-hidden="true">Next &raquo;</span>
            </span>
          </li>
        {% endif %}
      </ul>
    </nav>

    <!-- Pagination Info -->
    <div class="text-center mt-3" style="color: #666;">
      Showing {{ pagination.per_page * (pagination.page - 1) + 1 }} to 
      {{ pagination.per_page * (pagination.page - 1) + pagination.items|length }} 
      of {{ pagination.total }} bonds
    </div>
    {% endif %}
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

{% endblock %}
