{% block content %}
<head>
  <style>
    .container {
      padding: 15px;
    }

    .card {
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      margin-bottom: 20px;
      transition: all 0.3s ease-in-out;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .card:hover {
      transform: scale(1.03);
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    }

    .card-header {
      position: relative;
      padding: 0;
    }

    .card-img-top {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-top-left-radius: 0.5rem;
      border-top-right-radius: 0.5rem;
    }

    .sale-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: #ff0000;
      color: white;
      padding: 5px 10px;
      font-size: 0.8rem;
      font-weight: bold;
    }

    .card-body {
      padding: 15px;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    .card-title {
      font-size: 1.1rem;
      margin-bottom: 10px;
      line-height: 1.2;
      max-height: 2.4em;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }

    .card-text {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 10px;
      flex-grow: 1;
    }

    .price {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .adopted-by {
      margin-bottom: 10px;
    }

    .adopted-by ul {
      list-style-type: none;
      padding-left: 0;
    }

    .btn-view {
      width: 100%;
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      color: #212529;
      padding: 10px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 1rem;
      transition: background-color 0.3s;
      margin-top: auto;
    }

    .btn-view:hover {
      background-color: #e9ecef;
    }

    @media (min-width: 768px) {
      #available-items-container,
      #adopted-items-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
      }

      .card {
        margin-bottom: 0;
      }
    }

    @media (min-width: 1024px) {
      #available-items-container,
      #adopted-items-container {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (min-width: 1280px) {
      #available-items-container,
      #adopted-items-container {
        grid-template-columns: repeat(4, 1fr);
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Section for available items -->
    <div id="available-items-container">
      {% for item in items %}
        {% if not item.adopted %}
        <div class="card">
          <div class="card-header">
            {% if item.photo %}
            <img src="{{ item.imgurl }}" class="card-img-top" alt="{{ item.name }}" />
            {% else %}
            <img src="https://res.cloudinary.com/djozxyart/image/upload/v1712109859/New%20York%20Archival%20Society/Items/no_image_w0tjhw.jpg" class="card-img-top" alt="{{ item.name }}" />
            {% endif %}
            <span class="sale-badge">Available to Adopt</span>
          </div>
          <div class="card-body">
            <h5 class="card-title">{{ item.name }}</h5>
            <p class="card-text">{{ item.description | truncate(100) }}</p> <!-- Changed from item.desc to item.description -->
            <div class="price">${{ item.fee }}</div>
            <a href="{{ url_for('main.new_yorks_past_view_item', item_id=item.id) }}" class="btn-view">View</a>
          </div>
        </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Section for adopted items -->
    <h2 class="display-6 text-center mt-5 mb-5 adopted_items_title">Adopted Items</h2>
    <div id="adopted-items-container">
      {% for item in items %}
        {% if item.adopted %}
        <div class="card">
          <div class="card-header">
            {% if item.photo %}
            <img src="{{ item.imgurl }}" class="card-img-top" alt="{{ item.name }}" />
            {% else %}
            <img src="https://res.cloudinary.com/djozxyart/image/upload/v1712109859/New%20York%20Archival%20Society/Items/no_image_w0tjhw.jpg" class="card-img-top" alt="{{ item.name }}" />
            {% endif %}
            <span class="sale-badge">Adopted</span>
          </div>
          <div class="card-body">
            <h5 class="card-title">{{ item.name }}</h5>
            <p class="card-text">{{ item.description | truncate(100) }}</p> <!-- Changed from item.desc to item.description -->
            <div class="price">${{ item.fee }}</div>
            <div class="adopted-by">
              <p>Adopted by:</p>
              <ul>
                {% for donor in item.donors %}
                <li><b>{{ donor.donor_name }}</b></li>
                {% endfor %}
              </ul>
            </div>
            <a href="{{ url_for('main.new_yorks_past_view_item', item_id=item.id) }}" class="btn-view">View</a>
          </div>
        </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</body>

{% endblock %}
